# TIMELINE_CORE_TODOS

For feral worker agents implementing **PHASE_TL01_agnostic_timeline_engine**. Obey the allow-list and STOP RULE in PHASE_TL01. All non-listed modules are read-only context (including CAD/plan-of-work sources). No /ui, /core, /tunes, auth, Nexus, or orchestration changes.

- [ ] **T01.1 [BLOCKER] Core models** — engines/timeline_core/models.py; tests/test_models.py. Define Task, Dependency, Status enum, grouping/tags/source/meta/request_id; validate tenant/env/start<=end; deterministic hash/id for source-derived tasks. Tests assert validation, enums, determinism.  
- [ ] **T01.2 [BLOCKER] Deterministic IDs from upstream** — engines/timeline_core/models.py; tests/test_models.py. Implement hash rules for tasks derived from CAD BoQ/plan-of-works/content payloads; store hash in meta. Tests assert identical inputs → identical ids, changed inputs → new ids.  
- [ ] **T01.3 [BLOCKER] Service CRUD + query** — engines/timeline_core/service.py; tests/test_service.py. CRUD tasks/dependencies; list by tenant/env with filters (date range, tags, grouping, status); enforce tenant scoping; topological order helper; cycle detection with clear error. Tests cover CRUD, filters, topo order, cycle handling, tenant isolation.  
- [ ] **T01.4 [BLOCKER] CAD adapter** — engines/timeline_core/service.py; tests/test_service.py. Adapter to build tasks from plan_of_work/boq_quantities (read-only inputs) with grouping (level/zone/trade), duration, cost meta, deterministic ids. Tests assert expected tasks/meta and determinism.  
- [ ] **T01.5 [BLOCKER] Content-plan adapter** — engines/timeline_core/service.py; tests/test_service.py. Adapter to build tasks from generic content plan (campaign/channel/asset/due_date/owner/tags) with validation and deterministic ids. Tests assert required fields, determinism, and correct grouping.  
- [ ] **T01.6 [QUALITY] View-model JSON for Gantt** — engines/timeline_core/service.py; tests/test_service.py. Produce lanes/groups, tasks with display fields, dependencies, color/status mapping; deterministic ordering. Tests assert stable shape/order and dependency mapping.  
- [ ] **T01.7 [BLOCKER] HTTP API** — engines/timeline_core/routes.py; tests/test_routes.py. CRUD/list/build-from-adapter/view-model endpoints; require tenant/env; 4xx on validation errors; no auth changes. Tests cover happy/negative paths and tenant scoping.  
- [ ] **T01.8 [BLOCKER] Validation & constraints** — engines/timeline_core/service.py; tests/test_service.py. Enforce start<=end, dependency types, max page size, cycle detection; reject cross-tenant access. Tests assert validations and errors.  
- [ ] **T01.9 [QUALITY] Docs/examples** — docs/engines/timeline_program/PHASE_TL01_agnostic_timeline_engine.md and/or docs/engines/timeline_program/*.md. Add CAD and marketing example payloads and resulting Gantt JSON; describe UI consumption of view-model.  
